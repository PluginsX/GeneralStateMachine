<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>节点图形化编辑器</title>
    <link rel="stylesheet" href="./assets/styles/global.css">
</head>

<body>
    <!-- 顶部菜单栏 -->
    <div class="menu-bar">
        <div class="menu-group">
            <button id="new-project">新建</button>
            <button id="import-md">导入Markdown</button>
            <div class="export-submenu">
                <button id="export-menu">导出</button>
                <div class="export-submenu-content">
                    <button id="export-md">导出Markdown</button>
                    <button id="export-image">导出为位图</button>
                </div>
            </div>
            <button id="save-project">保存</button>
            <select id="selection-filter" class="selection-filter">
                <option value="all">选择所有对象</option>
                <option value="nodes">仅选择节点</option>
                <option value="connections">仅选择连线</option>
            </select>
        </div>
        <div class="menu-group">
            <button id="undo">撤销</button>
            <button id="redo">重做</button>
            <button id="toggle-theme">切换主题</button>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="main-content">
        <!-- 左侧工具栏 -->
        <aside class="tool-panel">
            <div class="tool-item" draggable="true" data-type="node">
                📦 节点
            </div>
            <div class="tool-item" draggable="true" data-type="connection">
                🔗 连线
            </div>
        </aside>

        <!-- 中间工作区 -->
        <section class="workspace">
            <canvas id="editor-canvas"></canvas>
            <div class="selection-rectangle hidden"></div>
        </section>

        <!-- 右侧属性栏 -->
        <aside class="property-panel">
            <div id="node-properties" class="property-section hidden">
                <h3>节点属性</h3>
                <div class="form-group">
                    <label for="node-name">节点名称</label>
                    <input type="text" id="node-name">
                </div>
                <div class="form-group">
                    <label for="node-description">节点描述</label>
                    <textarea id="node-description"></textarea>
                </div>

                <div class="form-group">
                    <label>尺寸设置</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="node-autosize">
                        <label for="node-autosize">自适应内容尺寸</label>
                    </div>
                </div>

                <div class="form-group dimension-inputs">
                    <div>
                        <label for="node-width">宽度</label>
                        <input type="number" id="node-width" min="50" max="500" value="120">
                    </div>
                    <div>
                        <label for="node-height">高度</label>
                        <input type="number" id="node-height" min="30" max="300" value="80">
                    </div>
                </div>

                <button id="update-node" class="btn">更新节点</button>
                <button id="delete-node" class="btn btn-danger">删除节点</button>
            </div>

            <div id="connection-properties" class="property-section hidden">
                <h3>连线条件</h3>
                <div id="conditions-list">
                    <!-- 条件项将通过JavaScript动态添加 -->
                </div>
                <button id="add-condition" class="btn">添加条件</button>
                <button id="delete-connection" class="btn btn-danger">删除连线</button>
            </div>

            <div id="no-selection" class="property-section">
                <h3>提示</h3>
                <p>选择节点或连线以编辑其属性</p>
            </div>
        </aside>
    </div>

    <!-- 底部状态栏 -->
    <footer class="status-bar">
        <div class="status-info">就绪</div>
        <div class="zoom-controls">
            <button id="zoom-out">-</button>
            <span id="zoom-level">100%</span>
            <button id="zoom-in">+</button>
        </div>
    </footer>

    <!-- 隐藏的文件输入，用于导入Markdown -->
    <input type="file" id="file-input" accept=".md" style="display: none;">

    <script type="module" src="../src/main.js"></script>
</body>

</html>